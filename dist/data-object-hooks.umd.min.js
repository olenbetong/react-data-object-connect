(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.dataObjectHooks={}))})(this,function(a){"use strict";function b(a,b){return c(a)||d(a,b)||e()}function c(a){if(Array.isArray(a))return a}function d(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(a,b){var c=window.af.data,d=new c.DataProviderHandler({dataSourceId:a.getDataSourceId(),timeout:3e4}),e=a.getFields();return new Promise(function(a,c){d.retrieve({filterString:"",whereClause:b},function(b,d){if(null!==b)c(b);else{var f=[],g=!0,h=!1,j=void 0;try{for(var k,l=d[Symbol.iterator]();!(g=(k=l.next()).done);g=!0){for(var m=k.value,n={},o=0;o<m.length;o++)n[e[o].name]=m[o];f.push(n)}}catch(a){h=!0,j=a}finally{try{g||null==l.return||l.return()}finally{if(h)throw j}}a(f)}})})}const{React:g}=window,h=g.PureComponent,i=g.Component,j=g.useState,k=g.useEffect;var l=["onFieldChanged","onRecordCreated","onRecordDeleted","onRecordRefreshed","onAfterSave","onCancelEdit","onDataLoaded"];a.useCurrentIndex=function(a){var c=j(a.getCurrentIndex()),d=b(c,2),e=d[0],f=d[1];return k(function(){return a.attachEvent("onCurrentIndexChanged",f),f(a.getCurrentIndex()),function(){return a.detachEvent("onCurrentIndexChanged",f)}},[a]),e},a.useCurrentRow=function(a){function c(){g(a.currentRow())}var d=j({}),e=b(d,2),f=e[0],g=e[1];return k(function(){var b=["onCurrentIndexChanged"].concat(l);return b.forEach(function(b){return a.attachEvent(b,c)}),c(),function(){return b.forEach(function(b){return a.detachEvent(b,c)})}},[a]),f},a.useSingleRecord=function(a,c){function d(){o(!0),f(a,c).then(function(a){0<a.length?i(a[0]):i(null),o(!1)})}var e=j(null),g=b(e,2),h=g[0],i=g[1],l=j(!0),m=b(l,2),n=m[0],o=m[1];return k(function(){d()},[a,c]),{record:h,refresh:d,isLoading:n}},a.useData=function(a){function c(){g(a.getData())}var d=j([]),e=b(d,2),f=e[0],g=e[1];return k(function(){return l.forEach(function(b){return a.attachEvent(b,c)}),c(),function(){return l.forEach(function(b){return a.detachEvent(b,c)})}},[a]),f},a.useDataWithoutState=function(a,c){function d(){o(!0),f(a,c).then(function(a){0<a.length?i(a):i([]),o(!1)})}var e=j([]),g=b(e,2),h=g[0],i=g[1],l=j(!0),m=b(l,2),n=m[0],o=m[1];return k(function(){d()},[a,c]),{data:h,refresh:d,isLoading:n}},a.useDirty=function(a){var c=j(!1),d=b(c,2),e=d[0],f=d[1];return k(function(){return a.attachEvent("onDirtyChanged",f),f(a.isDirty()),function(){a.detachEvent("onDirtyChanged",f)}},[a]),e},a.useError=function(a){var c=j(null),d=b(c,2),e=d[0],f=d[1];return k(function(){return a.attachEvent("onDataLoadFailed",f),function(){a.detachEvent("onDataLoadFailed",f)}},[a]),e},a.useLoading=function(a){function c(){h(!0)}function d(){h(!1)}var e=j(a.isDataLoading()),f=b(e,2),g=f[0],h=f[1];return k(function(){return a.attachEvent("onBeforeLoad",c),a.attachEvent("onDataLoaded",d),a.attachEvent("onDataLoadFailed",d),h(a.isDataLoading),function(){a.detachEvent("onBeforeLoad",c),a.detachEvent("onDataLoaded",d),a.detachEvent("onDataLoadFailed",d)}},[a]),g},a.useStatus=function(a){function c(){l(!0)}function d(){l(!1)}function e(){p(!0)}function f(){p(!1)}var g=j(!1),h=b(g,2),i=h[0],l=h[1],m=j(!1),n=b(m,2),o=n[0],p=n[1];return k(function(){return a.attachEvent("onBeforeSave",c),a.attachEvent("onAfterSave",d),a.attachEvent("onSaveFailed",d),a.attachEvent("onRecordDeleting",e),a.attachEvent("onRecordDeleted",f),function(){a.detachEvent("onBeforeSave",c),a.detachEvent("onAfterSave",d),a.detachEvent("onSaveFailed",d),a.detachEvent("onRecordDeleting",e),a.detachEvent("onRecordDeleted",f)}},[a]),{isDeleting:o,isSaving:i}},a.usePermissions=function(a){var c=j(a.isDeleteAllowed()),d=b(c,2),e=d[0],f=d[1],g=j(a.isInsertAllowed()),h=b(g,2),i=h[0],l=h[1],m=j(a.isUpdateAllowed()),n=b(m,2),o=n[0],p=n[1];return k(function(){return a.attachEvent("onAllowDeleteChanged",f),a.attachEvent("onAllowInsertChanged",l),a.attachEvent("onAllowUpdateChanged",p),function(){a.detachEvent("onAllowDeleteChanged",f),a.detachEvent("onAllowInsertChanged",l),a.detachEvent("onAllowUpdateChanged",p)}},[a]),{allowDelete:e,allowInsert:i,allowUpdate:o}},Object.defineProperty(a,"__esModule",{value:!0})});
